<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANSH Edit Studio</title>
<style>
:root{
  --bg:#1a1a1a;
  --panel:#2b2b2b;
  --accent:#f97316; /* bright orange */
  --accent2:#fb923c;
  --muted:rgba(255,255,255,0.6);
  --glass: rgba(255,255,255,0.05);
  --success:#10b981;
  --rejected:#ef4444;
  --pending:#f59e0b;
  font-family:'Inter',sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:#fff;min-height:100vh;display:flex;flex-direction:column;}
header{display:flex;justify-content:space-between;align-items:center;padding:20px;}
.logo{display:flex;align-items:center;gap:12px;}
.dot{width:42px;height:42px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:10px;display:flex;align-items:center;justify-content:center;color:#1a1a1a;font-weight:800;}
.container{flex:1;display:grid;grid-template-columns:1fr 400px;max-width:1200px;margin:20px auto;gap:20px;padding:0 10px;}
.panel{background:var(--panel);border-radius:14px;padding:20px;box-shadow:0 6px 30px rgba(0,0,0,0.6);}
h2{margin-bottom:12px;color:var(--accent);}
label{font-size:14px;color:var(--muted);margin-bottom:6px;display:block;}
input,select,textarea{width:100%;padding:10px;border-radius:8px;border:none;background:var(--glass);color:#fff;font-size:14px;}
button.btn{cursor:pointer;padding:10px 16px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#1a1a1a;font-weight:700;transition:all .2s ease;}
button.btn:hover{transform:translateY(-2px);}
button.btn:active{transform:translateY(2px);}
.muted{color:var(--muted);}
.flex{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
.userBookings,.incomingList,.couponList,.messageList{max-height:300px;overflow-y:auto;}
.booking-item,.coupon-item,.message-item{background:var(--glass);padding:14px;border-radius:12px;margin-bottom:12px;transition:all .2s;}
.booking-item:hover,.coupon-item:hover,.message-item:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(249,115,22,0.3);}
.pill{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;}
.status{padding:2px 8px;border-radius:8px;font-size:12px;font-weight:700;}
.status.pending{background:var(--pending);color:#1a1a1a;}
.status.approved{background:var(--success);color:#1a1a1a;}
.status.rejected{background:var(--rejected);color:#fff;}
.logout-btn{background:transparent;color:var(--accent);border:1px solid rgba(249,115,22,0.6);margin-top:10px;}
@media(max-width:980px){.container{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header>
  <div class="logo"><div class="dot">A</div><div>ANSH Edit Studio<br><span class="muted" style="font-size:13px;">Video · Reels · Photo edits</span></div></div>
  <div><span class="pill" id="modeBadge">User</span></div>
</header>

<div class="container">
  <!-- USER PANEL -->
  <main class="panel" id="userPanel">
    <h2>Book a Request</h2>
    <label>Service</label>
    <select id="bk_service">
      <option value="photo">Photo Edit</option>
      <option value="video">Video Edit</option>
      <option value="reel">Reel Edit</option>
      <option value="subscription">Subscription</option>
    </select>
    <label>Type / Plan</label>
    <select id="bk_type">
      <option value="normal">Normal</option>
      <option value="pro">Pro</option>
      <option value="1month">1 Month</option>
      <option value="5month">5 Months</option>
      <option value="1year">1 Year</option>
      <option value="1week">1 Week</option>
    </select>
    <label>Name</label><input id="bk_name" placeholder="First Name">
    <label>Last Name</label><input id="bk_lastname" placeholder="Last Name">
    <label>Instagram ID</label><input id="bk_instagram" placeholder="@instagram">
    <label>Requirements</label><textarea id="bk_notes" rows="3" placeholder="Details for editor"></textarea>
    <div class="flex" style="margin-top:6px;">
      <input id="bk_coupon" placeholder="Coupon code" style="flex:1;">
      <button class="btn" onclick="applyCoupon()">Apply</button>
    </div>
    <div class="flex" style="margin-top:10px;justify-content:space-between;align-items:center;">
      <div>Price: <span id="bk_price">₹0</span></div>
      <button class="btn" onclick="submitBooking()">Send Request</button>
    </div>
    <h2 style="margin-top:20px;">My Booking Requests</h2>
    <div class="userBookings" id="userBookings"></div>
    <button class="btn logout-btn" onclick="logout()">Log Out</button>
  </main>

  <!-- DEVELOPER PANEL -->
  <aside class="panel" id="devPanel">
    <h2>Developer Panel</h2>
    <h3>Manage Coupons</h3>
    <input id="newCoupon" placeholder="Coupon Code">
    <input id="newDiscount" type="number" placeholder="Discount ₹" style="margin-top:6px;">
    <button class="btn" onclick="addCoupon()">Add Coupon</button>
    <div class="couponList" id="couponList"></div>

    <h3 style="margin-top:20px;">All User Requests</h3>
    <div class="incomingList" id="incomingList"></div>

    <h3 style="margin-top:20px;">Broadcast Messages</h3>
    <input id="broadcastMsg" placeholder="Message to users">
    <button class="btn" onclick="sendBroadcast()">Send</button>
    <div class="messageList" id="messageList"></div>

    <button class="btn logout-btn" onclick="logout()">Log Out</button>
  </aside>
</div>

<script>
// CONFIG
const NORMAL_CODE="FXANSH";
const DEV_CODE="FXANSHPRO"; // hidden in UI
let mode=localStorage.getItem("ansh_mode")||"";
let bookings=JSON.parse(localStorage.getItem("ansh_bookings")||"[]");
let coupons=JSON.parse(localStorage.getItem("ansh_coupons")||"[]");
let messages=JSON.parse(localStorage.getItem("ansh_messages")||"[]");
let currentBooking={price:0,couponApplied:false};
const priceMap={photo:{normal:90,pro:120},video:{normal:140,pro:160},reel:{normal:150,pro:200},subscription:{"1month":1000,"5month":5000,"1year":10000,"1week":250}};

// LOGIN
if(!mode){
  const code=prompt(`Enter access code:\nNormal Users: ${NORMAL_CODE}`);
  if(code.toUpperCase()===NORMAL_CODE){ mode="user"; }
  else if(code.toUpperCase()===DEV_CODE){ mode="dev"; }
  else{ alert("Invalid code!"); location.reload(); }
  localStorage.setItem("ansh_mode",mode);
}
document.getElementById("modeBadge").textContent=mode==="dev"?"Developer":"User";
document.getElementById("userPanel").style.display=mode==="user"?"block":"none";
document.getElementById("devPanel").style.display=mode==="dev"?"block":"none";

// ELEMENTS
const bkService=document.getElementById("bk_service");
const bkType=document.getElementById("bk_type");
const bkPrice=document.getElementById("bk_price");
const bkCoupon=document.getElementById("bk_coupon");

// FUNCTIONS
function calcPrice(){
  const s=bkService.value;
  const t=bkType.value;
  let p=0;
  if(s==="photo"||s==="video"||s==="reel"){p=priceMap[s][t]||0;}
  else if(s==="subscription"){p=priceMap.subscription[t]||0;}
  currentBooking.price=p;
  currentBooking.couponApplied=false;
  bkPrice.textContent="₹"+p;
}
bkService.addEventListener("change",()=>{
  const s=bkService.value;
  if(s==="subscription"){
    bkType.innerHTML='<option value="1month">1 Month</option><option value="5month">5 Months</option><option value="1year">1 Year</option><option value="1week">1 Week</option>';
  }else{
    bkType.innerHTML='<option value="normal">Normal</option><option value="pro">Pro</option>';
  }
  calcPrice();
});
bkType.addEventListener("change",calcPrice);

function applyCoupon(){
  const c=bkCoupon.value.trim();
  if(!c){alert("Enter coupon");return;}
  const coup=coupons.find(x=>x.code.toUpperCase()===c.toUpperCase());
  if(!coup){alert("Invalid coupon");return;}
  if(currentBooking.couponApplied){alert("Coupon already applied");return;}
  currentBooking.price=Math.max(0,currentBooking.price-coup.discount);
  currentBooking.couponApplied=true;
  bkPrice.textContent="₹"+currentBooking.price+" ("+coup.discount+" off)";
  alert("Coupon applied!");
}

function submitBooking(){
  const name=document.getElementById("bk_name").value.trim();
  const lastname=document.getElementById("bk_lastname").value.trim();
  const insta=document.getElementById("bk_instagram").value.trim();
  const notes=document.getElementById("bk_notes").value.trim();
  if(!name||!lastname||!insta){alert("Fill all fields");return;}
  const service=bkService.value;
  const type=bkType.value;
  const booking={id:"BK"+Date.now(),name,lastname,insta,service,type,price:currentBooking.price,couponApplied:currentBooking.couponApplied,notes,status:"pending"};
  bookings.unshift(booking);
  localStorage.setItem("ansh_bookings",JSON.stringify(bookings));
  alert("Booking sent!");
  renderUserBookings();
  renderIncoming();
}

// USER BOOKINGS VIEW
function renderUserBookings(){
  const container=document.getElementById("userBookings");
  container.innerHTML="";
  const userName=document.getElementById("bk_name").value.trim();
  bookings.filter(b=>b.name===userName).forEach(b=>{
    const div=document.createElement("div");
    div.className="booking-item";
    div.innerHTML=`<strong>${b.name} ${b.lastname}</strong> · ${b.service} - ${b.type}<br>
      Price: ₹${b.price} · Coupon: ${b.couponApplied?"Yes":"No"} · <span class="status ${b.status}">${b.status}</span>
      <p>${b.notes}</p>`;
    container.appendChild(div);
  });
}
renderUserBookings();

// DEVELOPER FUNCTIONS
function renderIncoming(){
  if(mode!=="dev") return;
  const container=document.getElementById("incomingList");
  container.innerHTML="";
  bookings.forEach(b=>{
    const div=document.createElement("div");
    div.className="booking-item";
    div.innerHTML=`<strong>${b.name} ${b.lastname}</strong> · ${b.service} - ${b.type}<br>
      Price: ₹${b.price} · Coupon: ${b.couponApplied?"Yes":"No"} · <span class="status ${b.status}">${b.status}</span>
      <p>${b.notes}</p>
      <div class="flex" style="margin-top:6px;">
      <button class="btn" onclick='approveBooking("${b.id}")'>Approve</button>
      <button class="btn" onclick='rejectBooking("${b.id}")'>Reject</button>
      </div>`;
    container.appendChild(div);
  });
}
function approveBooking(id){changeStatus(id,"approved");}
function rejectBooking(id){changeStatus(id,"rejected");}
function changeStatus(id,status){
  const idx=bookings.findIndex(b=>b.id===id);
  if(idx===-1) return;
  bookings[idx].status=status;
  localStorage.setItem("ansh_bookings",JSON.stringify(bookings));
  renderIncoming();
}

// COUPON
function addCoupon(){
  const code=document.getElementById("newCoupon").value.trim();
  const discount=parseInt(document.getElementById("newDiscount").value);
  if(!code||!discount){alert("Fill coupon and discount");return;}
  coupons.push({code,discount});
  localStorage.setItem("ansh_coupons",JSON.stringify(coupons));
  renderCoupons();
}
function renderCoupons(){
  const container=document.getElementById("couponList");
  container.innerHTML="";
  coupons.forEach(c=>{
    const div=document.createElement("div");
    div.className="coupon-item";
    div.innerHTML=`${c.code} - ₹${c.discount} <button class="btn" onclick='deleteCoupon("${c.code}")'>Delete</button>`;
    container.appendChild(div);
  });
}
function deleteCoupon(code){
  coupons=coupons.filter(c=>c.code!==code);
  localStorage.setItem("ansh_coupons",JSON.stringify(coupons));
  renderCoupons();
}
renderCoupons();

// BROADCAST
function sendBroadcast(){
  const msg=document.getElementById("broadcastMsg").value.trim();
  if(!msg){alert("Enter message");return;}
  messages.unshift({id:"MSG"+Date.now(),text:msg});
  localStorage.setItem("ansh_messages",JSON.stringify(messages));
  renderMessages();
}
function renderMessages(){
  const container=document.getElementById("messageList");
  container.innerHTML="";
  messages.forEach(m=>{
    const div=document.createElement("div");
    div.className="message-item";
    div.textContent=m.text;
    container.appendChild(div);
  });
}
renderMessages();

// LOGOUT
function logout(){
  localStorage.removeItem("ansh_mode");
  location.reload();
}
</script>
</body>
</html>
