<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANSH Edit Studio — Booking System</title>
<style>
:root{
  --bg:#1b0f00;
  --card:#2b1300;
  --accent:#ff8800;
  --accent2:#ffbb55;
  --muted:rgba(255,255,255,0.6);
  --glass: rgba(255,255,255,0.05);
  --success:#28a745;
  --rejected:#dc3545;
  --pending:#ffc107;
  font-family: 'Inter', sans-serif;
}
*{box-sizing:border-box;}
body{margin:0; min-height:100vh; background:var(--bg); color:#fff; display:flex; flex-direction:column; font-family:inherit;}
header{display:flex; justify-content:space-between; align-items:center; padding:20px;}
.logo{display:flex; align-items:center; gap:12px;}
.dot{width:42px;height:42px;background:linear-gradient(135deg,var(--accent),var(--accent2)); border-radius:10px; display:flex; align-items:center; justify-content:center; color:#120800; font-weight:800; transform:rotate(-8deg); box-shadow:0 6px 20px rgba(255,136,0,0.3);}
.container{flex:1; display:grid; grid-template-columns:1fr 400px; max-width:1200px; margin:20px auto; gap:20px; padding:0 10px;}
.panel{background:var(--card); border-radius:14px; padding:20px; box-shadow:0 6px 30px rgba(0,0,0,0.6);}
h2{margin:0 0 12px 0; font-size:22px; color:var(--accent);}
label{font-size:14px; color:var(--muted); margin-bottom:6px; display:block;}
input, select, textarea{width:100%; padding:10px; border-radius:8px; border:none; background:var(--glass); color:#fff; font-size:14px;}
button.btn{cursor:pointer;padding:10px 16px; border-radius:10px; border:none; background:linear-gradient(90deg,var(--accent),var(--accent2)); color:#120800; font-weight:700; transition:all .2s ease; box-shadow:0 6px 15px rgba(255,136,0,0.3);}
button.btn:hover{transform:translateY(-2px);}
button.btn:active{transform:translateY(2px);}
.muted{color:var(--muted);}
.booking-item, .coupon-item, .message-item{background:var(--glass); padding:14px; border-radius:12px; margin-bottom:12px; transition:transform .2s ease, box-shadow .2s ease;}
.booking-item:hover, .coupon-item:hover, .message-item:hover{transform:translateY(-2px); box-shadow:0 8px 25px rgba(255,136,0,0.3);}
.pill{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;}
.status{padding:2px 8px;border-radius:8px;font-size:12px;font-weight:700;}
.status.pending{background:var(--pending);color:#120800;}
.status.approved{background:var(--success);color:#120800;}
.status.rejected{background:var(--rejected);color:#fff;}
.flex{display:flex;gap:10px; align-items:center; flex-wrap:wrap;}
.userBookings, .incomingList, .couponList, .messageList{max-height:300px; overflow-y:auto;}
.userBookings::-webkit-scrollbar, .incomingList::-webkit-scrollbar, .couponList::-webkit-scrollbar, .messageList::-webkit-scrollbar{width:6px;}
.userBookings::-webkit-scrollbar-thumb, .incomingList::-webkit-scrollbar-thumb, .couponList::-webkit-scrollbar-thumb, .messageList::-webkit-scrollbar-thumb{background:rgba(255,136,0,0.5); border-radius:3px;}
.logout-btn{background:transparent;color:var(--accent);border:1px solid rgba(255,136,0,0.3); margin-top:10px;}
@media(max-width:980px){ .container{grid-template-columns:1fr;} }
</style>
</head>
<body>

<header>
  <div class="logo"><div class="dot">A</div><div>ANSH Edit Studio<br><span class="muted" style="font-size:13px;">Video · Reels · Photo edits</span></div></div>
  <div><span class="pill" id="modeBadge">User</span></div>
</header>

<div class="container">
<!-- USER PANEL -->
<main class="panel" id="userPanel">
  <h2>Book a Request</h2>
  <label>Service</label>
  <select id="bk_service">
    <option value="photo">Photo Edit</option>
    <option value="video">Video Edit</option>
    <option value="reel">Reel Edit</option>
    <option value="subscription">Subscription</option>
  </select>
  <label>Type / Plan</label>
  <select id="bk_type">
    <option value="normal">Normal</option>
    <option value="pro">Pro</option>
    <option value="1month">1 Month</option>
    <option value="5month">5 Months</option>
    <option value="1year">1 Year</option>
    <option value="1week">1 Week</option>
  </select>
  <label>Name</label>
  <input id="bk_name" placeholder="First Name">
  <label>Last Name</label>
  <input id="bk_lastname" placeholder="Last Name">
  <label>Instagram ID</label>
  <input id="bk_instagram" placeholder="@instagram">
  <label>Requirements</label>
  <textarea id="bk_notes" rows="3" placeholder="Details for editor"></textarea>
  <div class="flex" style="margin-top:6px;">
    <input id="bk_coupon" placeholder="Coupon code" style="flex:1;">
    <button class="btn" onclick="applyCoupon()">Apply</button>
  </div>
  <div class="flex" style="margin-top:10px; justify-content:space-between; align-items:center;">
    <div>Price: <span id="bk_price">₹0</span></div>
    <button class="btn" onclick="submitBooking()">Send Request</button>
  </div>
  <h2 style="margin-top:20px;">My Booking Requests</h2>
  <div class="userBookings" id="userBookings"></div>
  <button class="btn logout-btn" onclick="logout()">Log Out</button>
</main>

<!-- DEVELOPER PANEL -->
<aside class="panel" id="devPanel">
  <h2>Developer Panel</h2>
  <h3>Manage Coupons</h3>
  <input id="newCoupon" placeholder="Coupon Code">
  <input id="newDiscount" type="number" placeholder="Discount ₹" style="margin-top:6px;">
  <button class="btn" onclick="addCoupon()">Add Coupon</button>
  <div class="couponList" id="couponList"></div>
  
  <h3 style="margin-top:20px;">All User Requests</h3>
  <div class="incomingList" id="incomingList"></div>

  <h3 style="margin-top:20px;">Broadcast Messages</h3>
  <input id="broadcastMsg" placeholder="Message to users">
  <button class="btn" onclick="sendBroadcast()">Send</button>
  <div class="messageList" id="messageList"></div>

  <button class="btn logout-btn" onclick="logout()">Log Out</button>
</aside>

<script>
// ---- Config ----
const NORMAL_CODE="FXANSH";
const DEV_CODE="FXANSHPRO";
let mode=localStorage.getItem("ansh_mode")||"";
let bookings=JSON.parse(localStorage.getItem("ansh_bookings")||"[]");
let coupons=JSON.parse(localStorage.getItem("ansh_coupons")||"[]");
let messages=JSON.parse(localStorage.getItem("ansh_messages")||"[]");
let currentBooking={price:0,couponApplied:0};

// ---- Gate ----
if(!mode){
  const code=prompt(`Enter access code:\nNormal Users: ${NORMAL_CODE}`);
  if(code.toUpperCase()===NORMAL_CODE){ mode="user"; }
  else if(code.toUpperCase()===DEV_CODE){ mode="dev"; }
  else { alert("Invalid code!"); location.reload(); }
  localStorage.setItem("ansh_mode",mode);
}

// ---- Init UI ----
document.getElementById("modeBadge").textContent=mode==="dev"?"Developer":"User";
document.getElementById("userPanel").style.display=mode==="user"?"block":"none";
document.getElementById("devPanel").style.display=mode==="dev"?"block":"none";

const priceMap={
  photo:{normal:90,pro:120},
  video:{normal:140,pro:160},
  reel:{normal:150,pro:200},
  subscription:{"1month":1000,"5month":5000,"1year":10000,"1week":250}
};

// ---- Functions ----
function setupTypeOptions(){
  const s=document.getElementById("bk_service").value;
  const tSelect=document.getElementById("bk_type");
  if(s==="subscription"){
    tSelect.innerHTML='<option value="1month">1 Month</option><option value="5month">5 Months</option><option value="1year">1 Year</option><option value="1week">1 Week</option>';
  }else{
    tSelect.innerHTML='<option value="normal">Normal</option><option value
